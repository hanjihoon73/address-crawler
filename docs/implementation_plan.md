# 개발 계획서 (Implementation Plan)

## 목표
네이버 지도의 검색 결과를 크롤링하여 상호명과 주소(지번 주소 우선)를 수집하고, 웹 화면에서 페이징(20개씩) 처리하여 조회 및 엑셀 다운로드를 제공하는 웹 애플리케이션 개발.

## 사용자 리뷰 필요 사항
- **크롤링 속도**: "V" 버튼을 클릭하여 상세 정보를 가져오는 과정은 시간이 소요될 수 있습니다. 대량 데이터(예: 100개 이상) 요청 시 타임아웃 방지를 위한 처리 방식(Streaming 등)이 필요할 수 있으나, 1차적으로는 일반 API 호출로 구현합니다.
- **네이버 지도 UI 변경**: 네이버 지도의 DOM 클래스명은 수시로 변경될 수 있어, 추후 유지보수가 필요할 수 있습니다.

## 제안된 변경 사항

### 1. 프로젝트 초기화 및 구조 설정
- [x] **Next.js (App Router)** 기반 웹 애플리케이션 생성
- [x] User Rules에 따른 폴더 구조 설정 (`src/components`, `src/hooks`, `src/utils`, `src/api`)

### 2. 백엔드 (API & Crawler)
#### [NEW] src/app/api/crawl/route.ts
- [x] 클라이언트의 검색 요청(`keywords`, `limit`)을 받아 크롤링 로직을 실행하는 API 엔드포인트.

#### [NEW] src/utils/crawler.ts
- [x] **Puppeteer**를 사용한 브라우저 제어 로직.
- [x] 네이버 지도 페이지 이동 및 iframe 진입 (`searchIframe`).
- [x] 리스트 스크롤링으로 데이터 로드.
- [x] 각 아이템별 "V" 버튼(상세보기) 클릭 시뮬레이션 및 데이터 추출 로직.
- [x] 지번 주소 우선 추출, 없을 경우 도로명 주소 추출. (Refactored to Merge Basic/Detail)

### 3. 프론트엔드 (UI/UX)
#### [NEW] src/hooks/useMapCrawler.ts
- [x] API 호출 상태 관리 (로딩, 데이터, 에러).
- [x] 검색 결과 상태 관리.

#### [NEW] src/components/search/SearchForm.tsx
- [x] 검색어 입력 및 수집 개수(다이얼/숫자) 입력 폼.
- [x] 검색 버튼 (크롤링 시작).

#### [NEW] src/components/result/ResultTable.tsx
- [x] 수집된 데이터 테이블 표시.
- [x] **페이지네이션 기능**: 검색 결과가 20개를 초과할 경우 페이지 번호 표시 및 이동 기능.

#### [NEW] src/components/common/ExcelExportButton.tsx
- [x] `xlsx` 라이브러리를 사용하여 현재 수집된 데이터를 엑셀 파일로 다운로드.

#### [MODIFY] src/app/page.tsx
- [x] 전체 레이아웃 조합.

## 검증 계획

### 자동화 테스트
- 단위 테스트 작성은 생략하되, 핵심 로직(크롤러)은 별도 스크립트로 실행 가능하도록 고려.

### 수동 검증
1. **검색 테스트**: "강남 맛집" 등으로 검색 후 지정한 개수(예: 10개)만큼 수집되는지 확인.
2. **주소 확인**: 결과 목록에 "지번 주소"가 우선적으로 나오는지, 팝업(V 버튼)이 정상적으로 처리되는지 확인.
3. **페이징 테스트**: 30개 수집 시 1페이지(20개), 2페이지(10개)가 나뉘는지 확인.
4. **엑셀 다운로드**: 다운로드된 파일이 엑셀에서 정상적으로 열리고 데이터가 일치하는지 확인.
